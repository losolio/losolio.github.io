{"componentChunkName":"component---src-templates-docs-template-js","path":"/sql-format","webpackCompilationHash":"5b0d184403e85a6f0aa2","result":{"data":{"markdownRemark":{"html":"<p>By Harpal, published here <a href=\"https://stackoverflow.com/questions/8439650/how-to-drop-all-tables-in-a-sql-server-database\">https://stackoverflow.com/questions/8439650/how-to-drop-all-tables-in-a-sql-server-database</a></p>\n<p>/* Drop all Primary Key constraints */\nDECLARE @name VARCHAR(128)\nDECLARE @constraint VARCHAR(254)\nDECLARE @SQL VARCHAR(254)</p>\n<p>SELECT @name = (SELECT TOP 1 TABLE<em>NAME FROM INFORMATION</em>SCHEMA.TABLE<em>CONSTRAINTS WHERE constraint</em>catalog=DB<em>NAME() AND CONSTRAINT</em>TYPE = 'PRIMARY KEY' ORDER BY TABLE_NAME)</p>\n<p>WHILE @name IS NOT NULL\nBEGIN\nSELECT @constraint = (SELECT TOP 1 CONSTRAINT<em>NAME FROM INFORMATION</em>SCHEMA.TABLE<em>CONSTRAINTS WHERE constraint</em>catalog=DB<em>NAME() AND CONSTRAINT</em>TYPE = 'PRIMARY KEY' AND TABLE<em>NAME = @name ORDER BY CONSTRAINT</em>NAME)\nWHILE @constraint is not null\nBEGIN\nSELECT @SQL = 'ALTER TABLE [dbo].[' + RTRIM(@name) +'] DROP CONSTRAINT [' + RTRIM(@constraint)+']'\nEXEC (@SQL)\nPRINT 'Dropped PK Constraint: ' + @constraint + ' on ' + @name\nSELECT @constraint = (SELECT TOP 1 CONSTRAINT<em>NAME FROM INFORMATION</em>SCHEMA.TABLE<em>CONSTRAINTS WHERE constraint</em>catalog=DB<em>NAME() AND CONSTRAINT</em>TYPE = 'PRIMARY KEY' AND CONSTRAINT<em>NAME &#x3C;> @constraint AND TABLE</em>NAME = @name ORDER BY CONSTRAINT<em>NAME)\nEND\nSELECT @name = (SELECT TOP 1 TABLE</em>NAME FROM INFORMATION<em>SCHEMA.TABLE</em>CONSTRAINTS WHERE constraint<em>catalog=DB</em>NAME() AND CONSTRAINT<em>TYPE = 'PRIMARY KEY' ORDER BY TABLE</em>NAME)\nEND\nGO</p>\n<p>/* Drop all tables */\nDECLARE @name VARCHAR(128)\nDECLARE @SQL VARCHAR(254)</p>\n<p>SELECT @name = (SELECT TOP 1 [name] FROM sysobjects WHERE [type] = 'U' AND category = 0 ORDER BY [name])</p>\n<p>WHILE @name IS NOT NULL\nBEGIN\nSELECT @SQL = 'DROP TABLE [dbo].[' + RTRIM(@name) +']'\nEXEC (@SQL)\nPRINT 'Dropped Table: ' + @name\nSELECT @name = (SELECT TOP 1 [name] FROM sysobjects WHERE [type] = 'U' AND category = 0 AND [name] > @name ORDER BY [name])\nEND\nGO</p>","frontmatter":{"path":"/sql-format","title":"Delete everything"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}